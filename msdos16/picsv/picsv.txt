ＰＩＣｓｖ	v0.80

	RGB,Q0,BMP,DJP,PMT -> PIC コンバータ



■　はじめに

　この PICsv は、無圧縮ベタな、BMP,RGB,Q0,DJP,PMTのいずれかの形式
の画像ファイルをPIC 形式の画像ファイルに変換するプログラムです。
  生成できる PIC は TYPE 0(apic) 4,8,15,16ﾋﾞｯﾄ色、または TYPE 15 の
8(,15,16),24ﾋﾞｯﾄ色です（デフォルトでは TYPE 0です）。
他のTYPE の PICは作成できませんのであしからず。

圧縮率は他のセーバで生成されたものよりも若干悪いです（どっかバグっ
てるのかアルゴリズムがおかしいんだろな）。でもって空メモリの都合に
よりさらに本来のものより悪くなります（空メモリが足りないときはメッ
セージを表示します）。

スピードははやくないのでそのつもりでね。



■　使いかた

usage: PICsv [.FMT] [-opts] file(s)
 .FMT      入力画像のフォーマット .bmp .q0 .rgb .djp .pmt
 -o<FILE>  出力ファイルを FILE にする（１ファイルのみ）
 -0        TYPE 0 の (4,8,15,16ﾋﾞｯﾄ色) (A)PIC を生成
 -e        TYPE 15 の拡張 PIC を生成
 -c<N>     24ﾋﾞｯﾄ色画像入力時、強制的にNﾋﾞｯﾄ色画像扱いにする. N=15,16,24のみ
 -a<M:N>   入力のアスペクト比(横:縦)を強制的に M:N とする. M,N <= 255
 -pb<N>    TYPE 15 で出力するパレットの１つ当りのビット数. N=1〜8.省略時 8
 -d[-]     入力ファイルの日付も複写. -d- で日付複写しない

ファイル名は複数指定できます(-o無指定時）

作成できる PIC は TYPE 0(apic) または TYPE 15(拡張pic) です.
デフォルトでは apic で 4,8,15,16ビット色を生成します。フルカラー入力の
画像は特に指定がなければ 16ビット色で生成します。

-e を指定すれば TYPE 15 (拡張pic)で生成します。このばあい8,15,16,24ﾋﾞｯﾄ
色のPICを作成できます。16色画像は変換できません.

15ﾋﾞｯﾄ色画像生成は24ﾋﾞｯﾄ色のGRBの各下位3ﾋﾞｯﾄを捨てるだけです.
16ﾋﾞｯﾄ色画像生成は15ﾋﾞｯﾄ色と同様ですが、Gの上位から6ﾋﾞｯﾄ目を輝度ﾋﾞｯﾄ
として採用します。

rgb,q0 入力では、まず.falファイルを探し、なければ .iprファイルを探し、
それでなけば、640*400の画像として扱います。



■　変換できるサイズ

　デフォルトの apic 生成では、512ライン以上ある画像を生成できません。
apic では連鎖を 512行単位で区切っていますが、このプログラムではそうす
るのがめんどくさいので対応してません。
　TYPE 15 での出力ではそのような制限はありません。

　DOS 汎用でメイン・メモリしか使わないので、色数の大きい画像とか
サイズのでかい画像だと、圧縮率が本来のものよりも落ちます。
（PIC の'変化点の連鎖'が、メモリに取り込めたライン数分しか行えな
いので、そのぶんわるくなる...が、512*512 とか640*480とかならそんな
極端に悪くならないと思う...せいぜい数百〜数Kﾊﾞｲﾄ...）



■　type 15 の pic

  type 15 1993年, PICの生みの親である やなぎさわ氏によって正式に
拡張されたもの（ヘッダ）です。
　が、PIC2(p2)が制定されるまでの繋ぎ的なものだったこともあり、現状
ではあまり普及せず（対応ソフトも少ない）、一応 4,8(,12),15,16,24(,32)
ビット色が予約されていますが、8 ビット色以外はまず使われてなさそう
です（このツールで掃き出せちゃうが...実験扱い^^;）.



■　/MM ヘッダ

  TYPE 0(apic)生成のとき、入力した画像のドット比が正方形か(/XSS)、
縦２倍(/MY)以上ならば比率を現わす /MM ヘッダを生成します。
（16色のときにいわゆる x68kな比率のときは /XSN）

  また、作者名があったときは、apicg で拡張された /AU を用いて/MM
ヘッダ中に作者名をいれます。このとき、/MMヘッダ中は' 'を置けない
ことになっているため作者名中の' 'は'_'に置き換えられます。



■　たわごと

  pic2(p2)が制定され TYPE 15 対応の他のソフトも少ないこともあり、
デフォルトで TYPE 15 生成というのは不便なので、一番普及している 
TYPE 0 をデフォルトとしました（ほんとは、ぼくがX68K<=>98間のＣＧ
コンバートをする機会があったため、ですが^^;）

チェック不十分で、作成される PIC が妖しいかもしれないのでよく確認し
ながら使ってください。

このプログラムで生成した 256色画以外の TYPE 15 PIC の配布はしない
ほうがいいでしょう（って誰もいわなくてもしないわな^^;）。



■　おわりに

  コンパイルは、tc(++v1.01)のコンパクト・モデルで行いました。

　フリーソフトウェア(ＦＳＷ)とします。 
  極力、姉妹作である PICld も同時に入手してください。
　配布については、 パソ通(ｵﾝﾗｲﾝ)での非営利配布なら作者に連絡不要でし
ていただいてかまいません（ただし PICsv,PICldを一緒に行なうこと。片方
のみというのは不可です... あ、配布内容を変える(削る)のも無しよ）
そうでないばあいとか気になる点のあるばあいは連絡ください（作者の権利
を踏みにじるようなことは論外だけど）。もちろん利用は利用者の責任で用
いてください。作者は何の義務も責任も負いません。
ソースの改造、引用については第三者のプログラミングを妨げるような権利
を主張しないかぎりかまいません。ただ改造物の再配布は原作者と同じ配布
条件にし、少なくとも改造物であることと変更者名くらいは明記してくださ
い。

例によってあまり使ってないので、バグな可能性大有りです^^;）

					NBB00541 てんか☆（北村雅史）
