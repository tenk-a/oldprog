ＶＨＰセーバ＆ローダ  for PC88VA  てんか☆ふん版 Ver. 1.20T         1991/09/06


■はじめに
  このＶＨＰセーバ＆ローダはマシーンＭ氏作のPC9801用ＶＨＰセーバ(v1.11)＆
  ローダ(v1.10)にVA用にてんか☆ふんがささやかな変更をほどこしたものです。
  アルゴリズムはぜんぜんわかってないので、たんに枝葉の変更です。
  変更では若干MAGの影響を受けてます^^。

    Ver.1.20T というふうにﾊﾞｰｼﾞｮﾝの末に付けてる'T'は一応マシーンＭ氏のものと
  区別するためにTenka*Fun の頭文字をつけてます。

    もうすこしいじる予定なので今回ソースは入れてません。
  なおプログラムはＬＳＩ―ＣVer.3.2試食版でコンパイルさせていただきました。


■主な変更点
  ・ＰＣ８８ＶＡに対応。
  ・ローダの入力部に６０Ｋバイトほどバッファを設けてディスクアクセスの頻度を
    減らした。
  ・パレット・ファイルとして.RGBファイルにも対応した。
    それにともない、デフォルトのパレット・ファイルを.ALGから.RGBに変更した。
  ・ローダは -vで明るさを指定できるようにした。(MAGのマネ^^)


■FILES
  readme.txt   このファイル
  vhp.doc      vhsave.exe & vhload.exe の使い方
  vhload.exe   画像データを展開するプログラム
  vhsave.exe   画像データを圧縮するプログラム


■使い方
  vhp.docをみてください。


■８８ＶＡ版について
    MSEを組み込んだPC-Engine を使用してください。MSEが組み込んでないと実行でき
  ません。

    セーバ＆ローダ実行中は中断(^C)ができません。ルーチンはあるのですが、ｺﾝﾊﾟｲﾗ
  の違いか、VAだからか、98でもそうなのか、は、わかりません。ひょっとすると、
  うちだけかもしれませんが。
    とくに展開で ﾜｲﾙﾄﾞｶｰﾄﾞ等でたくさんの表示をいっぺんにおこなうと、VAではお世
  辞にもはやいとはいいがたい速度なので、リセットをおすはめになるかも...。
  もっとも-kでキー入力待ちを行うようにすれば、ESCキーで終了できますが。

    ローダは実行にあたって VAｽﾀﾝﾀﾞｰﾄﾞ･ﾓｰﾄﾞに自前で切り換えますが、終了時に元の
  モードには戻しませんので気をつけてください。（最初は元にに戻すようにしてたの
  ですが、98(ﾓﾉｸﾛ)ｸﾞﾗﾌｨｯｸ･ﾓｰﾄﾞに切り変わると絵が消されてしまうので、悲しいめに
  あいます^^。）
    セーバはVAﾈｲﾃｨﾌﾞ･ﾓｰﾄﾞ,VAｽﾀﾝﾀﾞｰﾄﾞ･ﾓｰﾄﾞ,98ﾃｷｽﾄ･ﾓｰﾄﾞならVAｽﾀﾝﾀﾞｰﾄﾞ･ﾓｰﾄﾞにし、
  98ｸﾞﾗﾌｨｯｸ･ﾓｰﾄﾞ, 98ﾓﾉｸﾛｰﾑ･ﾓｰﾄﾞならそのままで圧縮を行います。
  98ｸﾞﾗﾌｨｯｸ･ﾓｰﾄﾞでのセーブはたぶん大丈夫だと思いますが、改造の初期の段階でしか
  試したことがないので今でもできるかわかりません。98ﾓﾉｸﾛでは試したことありませ
  ん。もっともこのモードでのセーブはただのあやまちでしょうが。

    非常にまぬけなことですが、このローダ＆セーバはマルチプレーン１６色モードに
  しか対応していません。Ｋｔｙローダで展開した絵はセーブできますが、ＭＡＧなど
  で表示した絵をセーブしようとすると、哀しみを味わいます（しかも^Cはききません
  ^^;） 他は調べてないのでわかりませんがＶＡでは大抵シングルプレーンを使うのが
  普通とおもわれるので...


■たわごと
    なにぶんＶＡの資料をほとんどもってないので冗長なとこや間違ってるところとか
  あると思います(付属のﾏﾆｭｱﾙといくつかのI/Oのﾊﾞｯｸﾅﾝﾊﾞ...)。

    設定してあるパレットを読みだせるかどうかわからないし、シングルプレーンでの
  ＶＲＡＭの構造などもよくわかりません。
　このへんのことわかるかた、ぼくにおしえてください.
  （VA用のMAGLのｿｰｽのおかげでVRAMのｱｸｾｽのしかたが少しはわかりマルチプレーンで
    はなんとかなったのですが...あと、MSEのモードの判別・設定は NIFにアップされ
    ているmset v1.92のｿｰｽを参考にしました...ソース公開された方々に感謝）

    でも、もっともまぬけなことは、ぼくがアナログディスプレイをもってないことで
  す（^^;)  普段はデジタルでアナログデータを表示するときはテレビでみるはめにな
  ります。だから絵のこまかいところはわからない...


■配布＆著作権について
    たんなる変更者であるてんか☆ふんは、当然のことながら変更部分に対し著作権を
  主張しません。この改造版をふくめvhpの著作権はマシーンＭ氏のものです。
  以下にマシーンＭ氏の配布されている物のvhp.docの一部を抜き出しますので基本的
  にはこれに従ってください。

 =============================================================================
【４．このプログラムについて】
  このプログラムを使用する際には、以下の条件を守ってください。

 (1)  作者は、このプログラムの著作権を放棄していません。

 (2)  作者は、このプログラムに関するいかなる保証も行ないません。また、このプロ
    グラムの存在，使用により被ったあらゆる損害について、作者は一切の責任を負い
    ません。

 (3)  このプログラムの配布は、自由に行なって結構です。ただし、２章に書いてある
    ファイル(1)〜(5)全てを配布するようにしてください。そのとき、(1)〜(5)のファ
    イル内容を作者に無断で変更してはいけません。
      営利目的の利用は禁止します。

 (4)  使用者は、個人で使用する場合に限り、このプログラムを自由に変更することが
    できます。変更後のプログラムは、配布しないでください。

 (5)  変更や移植をしたプログラムの配布を行ないたい場合は、作者まで連絡をくださ
    い。以下の条件を満足している場合、配布を認めます。

     a) 圧縮プログラム変更，移植後の配布条件
          移植後のプログラムで圧縮した全ての画像データが、マシーンＭのVHP展開
        プログラムで展開できなければならない。

     b) 展開プログラム移植後の配布条件
          マシーンＭのVHP圧縮プログラムで圧縮した画像データの一部または全てが
        移植後のプログラムで展開できなければならない。

    a),b) の条件を満足していないプログラムの配布は認めません。

 (6)  このプログラムは、作者が予告なしにバージョンアップすることがあります。

 =============================================================================

    ってことで、転載は自由です（連絡不要...でも同封のﾌｧｲﾙの変更はしないで）。
  もちろん、改造者であるぼくも、このプログラムによって生じたいかなる被害にも責
  任を負いませんし、バージョンアップやデバッグは義務ではありません。
  （もちろん、バグはなるべく対処しますが。）


■さいごに
  ｖｈｐを考案、作成し、ソースごと公開され、ＶＡ版の公開を快く許可してくださっ
  たマシーンＭ氏に感謝します。


■
                                原作者  マシーンＭ   NIFTY-Serve      MAH02663
                          (VA版)変更者  てんか☆ふん NIFTY-Serve      NBB00541
